(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["607658c8"],{6870:function(t,e,n){},"84a3":function(t,e,n){"use strict";var i=n("af3c"),s=n.n(i);s.a},9224:function(t){t.exports={a:"1.1.3"}},af3c:function(t,e,n){},eb60:function(t,e,n){"use strict";var i=n("6870"),s=n.n(i);s.a},f241:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{attrs:{view:"hHh Lpr lFf"}},[n("client-settings",{attrs:{settings:t.currentSettings},on:{save:t.saveSettingsHandler,hide:t.hideSettingsHandler},model:{value:t.clientSettingsOpened,callback:function(e){t.clientSettingsOpened=e},expression:"clientSettingsOpened"}}),n("q-layout-header",[n("q-toolbar",{attrs:{color:"dark"}},[n("q-btn",{staticClass:"lt-lg",attrs:{flat:"",rounded:"",icon:"mdi-menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),n("q-toolbar-title",{staticStyle:{"line-height":"36px"}},[t._v("\n        MQTT Tiles\n        "),n("sup",{staticStyle:{position:"relative","font-size":".9rem","padding-left":"4px"}},[t._v(t._s(t.version))])])],1)],1),n("q-layout-drawer",{attrs:{side:"left"},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[n("div",{staticClass:"connections__subheader q-px-md bg-dark",staticStyle:{position:"relative",height:"70px"}},[n("span",{staticClass:"text-white",staticStyle:{"font-size":"1.4rem","line-height":"70px"}},[t._v("My connections")]),n("q-btn",{staticClass:"text-dark",staticStyle:{position:"absolute",bottom:"-20px",right:"16px","z-index":"1"},attrs:{"fab-mini":"",icon:"mdi-plus",color:"white"},on:{click:t.openSettings}})],1),t.clientsIds.length?n("q-list",{staticClass:"scroll",staticStyle:{position:"absolute",top:"70px",bottom:"0",right:"0",left:"0"}},[n("q-list-header",[n("span",[t._v("Connections")])]),t._l(t.clients,function(e,i){var s;return n("q-item",{key:i,staticClass:"cursor-pointer",class:{active:i===t.activeClientId},nativeOn:{click:function(e){t.setActiveClient(i)}}},[n("q-item-side",[n("q-icon",{attrs:{name:t.connected?"mdi-lan-connect":"mdi-lan-disconnect"}},[i===t.activeClientId?n("q-tooltip",[t._v(t._s(t.connected?"Connected":"Disconnected"))]):t._e()],1)],1),n("q-item-main",[n("q-item-tile",{staticClass:"ellipsis",class:(s={},s["text-"+(t.connected?"green":"red")+"-6"]=i===t.activeClientId,s),attrs:{label:""}},[t._v("\n            "+t._s(e.clientName)+"\n          ")]),n("q-item-tile",{staticClass:"ellipsis",attrs:{sublabel:""}},[t._v(t._s(e.host))])],1),n("q-item-side",{attrs:{right:""}},[n("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"},on:{click:function(t){t.stopPropagation()}}},[n("q-popover",{attrs:{anchor:"bottom right",self:"top right"}},[n("q-list",[n("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"cursor-pointer",attrs:{highlight:""},nativeOn:{click:function(e){t.editClientSettings(i)}}},[n("q-item-side",{attrs:{icon:"mdi-settings"}}),n("q-item-main",{attrs:{label:"Edit"}})],1),n("q-item-separator"),n("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"cursor-pointer",attrs:{highlight:""},nativeOn:{click:function(e){t.removeClient(i)}}},[n("q-item-side",{attrs:{color:"red",icon:"mdi-delete-outline"}}),n("q-item-main",{attrs:{label:"Remove"}})],1)],1)],1)],1)],1)],1)})],2):n("div",{staticClass:"q-px-md q-pt-lg text-center"},[n("div",{staticClass:"text-bold"},[t._v("No connections")]),n("div",{staticStyle:{"font-size":".8rem"}},[t._v("Create a connection to visualize its data on boards")])])],1),n("q-page-container",[n("router-view",{attrs:{client:t.clients[t.activeClientId]},on:{"change:status":t.changeStatus}})],1)],1)},s=[];i._withStripped=!0;n("ac6a"),n("cadf"),n("456d");var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-modal",{on:{hide:t.closeHandler},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[n("q-modal-layout",[n("q-toolbar",{attrs:{slot:"header",color:"dark"},slot:"header"},[n("q-toolbar-title",[t._v("\n        MQTT client\n      ")])],1),n("div",{staticStyle:{margin:"20px"},style:{height:t.$q.platform.is.mobile?"calc(100% - 100px)":"50vh",width:t.$q.platform.is.mobile?"calc(100% - 40px)":"50vw"}},[n("q-input",{attrs:{color:"dark","float-label":"MQTT client name",error:!t.currentSettings.clientName},model:{value:t.currentSettings.clientName,callback:function(e){t.$set(t.currentSettings,"clientName",e)},expression:"currentSettings.clientName"}}),n("q-input",{attrs:{color:"dark","float-label":"Client ID",error:!t.currentSettings.clientId,after:[{icon:"mdi-refresh",handler:function(){t.currentSettings.clientId="mqtt-tiles-"+Math.random().toString(16).substr(2,8)}}]},model:{value:t.currentSettings.clientId,callback:function(e){t.$set(t.currentSettings,"clientId",e)},expression:"currentSettings.clientId"}}),n("q-input",{attrs:{color:"dark","float-label":"Host",error:!t.currentSettings.host||0===t.currentSettings.host.indexOf("ws:"),after:[{icon:"mdi-alert-outline",handler:t.hostErrorHandler,error:!0}]},model:{value:t.currentSettings.host,callback:function(e){t.$set(t.currentSettings,"host",e)},expression:"currentSettings.host"}}),n("q-input",{attrs:{color:"dark",type:"number","float-label":"Keep alive"},model:{value:t.currentSettings.keepalive,callback:function(e){t.$set(t.currentSettings,"keepalive",e)},expression:"currentSettings.keepalive"}}),n("q-select",{attrs:{color:"dark",options:[{label:"3.1.1",value:4},{label:"5.0",value:5}],"float-label":"Version of MQTT"},model:{value:t.currentSettings.protocolVersion,callback:function(e){t.$set(t.currentSettings,"protocolVersion",e)},expression:"currentSettings.protocolVersion"}}),n("q-checkbox",{staticClass:"q-mr-sm",staticStyle:{height:"56px"},attrs:{color:"dark",label:5===t.currentSettings.protocolVersion?"Clean start":"Clean session"},model:{value:t.currentSettings.clean,callback:function(e){t.$set(t.currentSettings,"clean",e)},expression:"currentSettings.clean"}}),5===t.currentSettings.protocolVersion?n("q-input",{staticStyle:{display:"inline-flex",width:"calc(100% - 115px)"},attrs:{color:"dark",type:"number","float-label":"Session expiry interval",clearable:"","clear-value":void 0},model:{value:t.currentSettings.properties.sessionExpiryInterval,callback:function(e){t.$set(t.currentSettings.properties,"sessionExpiryInterval",e)},expression:"currentSettings.properties.sessionExpiryInterval"}}):t._e(),n("q-input",{attrs:{color:"dark","float-label":"Username",clearable:"","clear-value":void 0},model:{value:t.currentSettings.username,callback:function(e){t.$set(t.currentSettings,"username",e)},expression:"currentSettings.username"}}),n("q-input",{attrs:{color:"dark","float-label":"Password",clearable:"","clear-value":void 0},model:{value:t.currentSettings.password,callback:function(e){t.$set(t.currentSettings,"password",e)},expression:"currentSettings.password"}}),n("q-checkbox",{staticClass:"q-mr-sm",staticStyle:{height:"56px"},attrs:{color:"dark",label:"Sync boards settings"},model:{value:t.currentSettings.syncToRetain,callback:function(e){t.$set(t.currentSettings,"syncToRetain",e)},expression:"currentSettings.syncToRetain"}}),t.currentSettings.syncToRetain?n("q-input",{staticStyle:{display:"inline-flex",width:"calc(100% - 188px)"},attrs:{color:"dark","float-label":"Namespace to sync boards settings",clearable:"","clear-value":void 0},model:{value:t.currentSettings.syncNamespace,callback:function(e){t.$set(t.currentSettings,"syncNamespace",e)},expression:"currentSettings.syncNamespace"}}):t._e()],1),n("q-toolbar",{attrs:{slot:"footer",color:"dark"},slot:"footer"},[n("q-toolbar-title"),n("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",dense:""},on:{click:t.closeHandler}},[t._v("Close")]),n("q-btn",{attrs:{flat:"",dense:"",disable:!t.validateCurrentSettings},on:{click:t.saveSettingsHandler}},[t._v(t._s(t.settings?"Update":"Save"))])],1)],1)],1)},r=[];a._withStripped=!0;n("6b54");var l=n("42454"),o=n.n(l),c={name:"ClientSettings",props:["value","settings"],data:function(){var t={clientName:"New client",clientId:"mqtt-tiles-".concat(Math.random().toString(16).substr(2,8)),host:"wss://mqtt.flespi.io",keepalive:60,protocolVersion:5,clean:!0,username:"FlespiToken XXXXXXXXXXXXXXXXXXX",password:"",properties:{sessionExpiryInterval:void 0},syncToRetain:!1,syncNamespace:"xflespifront/mqtttiles/boards"};return{defaultSettings:t,currentSettings:this.settings?o()({},t,this.settings):o()({},t)}},computed:{validateCurrentSettings:function(){return!!this.currentSettings.clientId&&!!this.currentSettings.host&&!(0===this.currentSettings.host.indexOf("ws:"))},status:function(){return this.value}},methods:{saveSettingsHandler:function(){var t=this;this.$emit("save",this.currentSettings),this.closeHandler(),this.$nextTick(function(){t.defaultSettings.clientId="mqtt-tiles-".concat(Math.random().toString(16).substr(2,8)),t.currentSettings=o()({},t.defaultSettings)})},closeHandler:function(){this.$emit("input",!1),this.$emit("hide")},hostErrorHandler:function(){this.$q.notify({message:"Host must be not empty and only over secured sockets"})}},watch:{settings:function(t){this.currentSettings=o()({},this.defaultSettings,t)}}},d=c,u=(n("84a3"),n("2877")),p=Object(u["a"])(d,a,r,!1,null,null,null);p.options.__file="ClientSettings.vue";var g=p.exports,v=n("f9d8"),m=n("b047c"),h=n.n(m),f=n("2b0e"),S=n("5a50"),b=n("9224"),q=h()(function(t){v["a"].set(S["b"],t)},500,{trailing:!0}),k={name:"MyLayout",data:function(){return{leftDrawerOpen:this.$q.platform.is.desktop,clientSettingsOpened:!1,currentSettings:void 0,clients:{},activeClientId:void 0,editedClientId:void 0,connected:!1,version:b["a"]}},computed:{clientsIds:function(){return Object.keys(this.clients)}},methods:{openSettings:function(){this.clientSettingsOpened=!0},hideSettingsHandler:function(){this.currentSettings=void 0,this.editedClientId=void 0},saveSettingsHandler:function(t){var e=this.editedClientId?this.editedClientId:this.clientsIds.length?parseInt(this.clientsIds[this.clientsIds.length-1])+1:0;f["default"].set(this.clients,e,t)},editClientSettings:function(t){this.currentSettings=this.clients[t],this.editedClientId=t,this.openSettings()},removeClient:function(t){var e=this;this.$q.dialog({title:"Warning",message:"Do you really want to delete ".concat(this.clients[t].clientName," client?"),color:"dark",ok:!0,cancel:!0}).then(function(){e.activeClientId===t&&(e.activeClientId=void 0),f["default"].delete(e.clients,t)})},setActiveClient:function(t){this.activeClientId=t},changeStatus:function(t){this.connected=t}},created:function(){var t=v["a"].get.item(S["b"]);t&&(this.clients=t)},watch:{clients:{deep:!0,handler:function(t){q(t)}}},components:{clientSettings:g}},y=k,x=(n("eb60"),Object(u["a"])(y,i,s,!1,null,null,null));x.options.__file="MyLayout.vue";e["default"]=x.exports}}]);